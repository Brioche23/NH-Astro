---
import Vimeo from './Vimeo.astro';

const {title, url, imgUrl, vimeoId, categorie} = Astro.props

const videoSizes = ["w-1/2 ml-auto mr-20", "w-1/2 ml-auto mL-20", "w-2/3 ml-auto mr-0", "w-2/3 mR-auto mL-0", "w-1/3 ml-auto mr-0", "w-1/3 mR-auto mL-0"]
// let margins = ['ml-auto mr-0', 'ml-auto mr-20', 'ml-0 mr-auto', 'ml-20 mr-auto'];

const videoId = "video-"+vimeoId;


function getRandomWidth() {
  return videoSizes[Math.floor(Math.random() * videoSizes.length)];
}

// function getRandomMargin() {
//   return margins[Math.floor(Math.random() * margins.length)];
// }

---

<li id={videoId} class={`video-card relative transition-all duration-500 ${getRandomWidth()}`} style="opacity: 1;">
     <Vimeo {vimeoId} {title} {categorie}/>
</li>

<script >
     console.log('hello');
     const videoCards = document.querySelectorAll('li.video-card');
     // Handle clicks on each button.

     videoCards.forEach((card, index) => {
      card.addEventListener('click', () => {
        toggleOpacity(videoCards, index);
    
     console.log('toggle');
  });
});

function toggleOpacity(videoCards, index){
  videoCards.forEach((card, i) => {
   if(i!==index){
      card.style.width = card.style.width === '100%' ? '' : '';
      card.style.opacity = card.style.opacity === '1' ? '.5' : '.5';
      console.log(card.style.opacity);
    }
    else{
      card.style.width = card.style.width === '100%' ? '' : '100%';
      card.style.opacity = card.style.opacity === '.5' ? '1' : '';
    }

});
}

</script>

<style>
.video-card::after {
  content:"";
  position:absolute;
  z-index:2;
  width:100%;
  height:100%;
  left:0;
  top:0;
}
</style>